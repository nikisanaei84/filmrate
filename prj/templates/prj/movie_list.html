{% extends '_base.html' %}
{% block title %}
   home page
{% endblock title %}
{% block content %}
  <h1>All Movies</h1>
  <!--search--> 
  <form method="GET" class="mb-3" method="GET" action={% url "movie_list" %}>
    <input type="search" name="genre" placeholder="Genre (e.g., Action)" class="form-control" value="{{ request.GET.genre}}">
    <button type="submit" class="btn btn-primary mt-2">Filter</button>
  </form>
  {% if request.GET.genre %}
  <div class="alert alert">searching for genre: <strong>{{ request.GET.genre}}</strong>
    <br>
    result number:
    <strong>{{ movies|length }}</strong>
  </div>
{% endif %}



  <div class="row">
    {% for movie in movies %}
      <div class="col-md-4 mb-3">
        <div class="card">
          {% if movie.poster %}
          <a href="{% url "detail" movie.id %}">
            <img src="{{movie.poster.url}}" class="card-img-top" alt="{{ movie.title }}"
             style="object-fit:cover; height:300px; width:100%">
          </a>
          {% endif %}
          <div class="card-body">
            <h5 class="card-title" >
                <a href="{% url "detail" movie.id %}" style="text-decoration: none; color: inherit;">{{ movie.title }}</a></h5>
            <p class="card-text">Genre: {{ movie.genre }} | Year: {{ movie.release_year }}</p>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No movies found.</p>
    {% endfor %}
  </div>
  {% if is_paginated %}
    <nav aria-label="Page navigation">
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
        {% endif %}
        <li class="page-item disabled"><span class="page-link">Page {{ page_obj.number }} of {{ paginator.num_pages }}</span></li>
        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a></li>
        {% endif %}
      </ul>
    </nav>
  {% endif %}







{% endblock %}